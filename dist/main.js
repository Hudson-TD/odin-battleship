(()=>{var e={496:(e,t,r)=>{const{removeMatchingObjects:a}=r(225);e.exports={computerLegalAttack:function(e){let t=[],r=[];for(let e=0;e<10;e++)for(let t=0;t<10;t++)r.push({x:e,y:t});e.board.missedShots.forEach((e=>{t.push(e)})),e.board.hits.forEach((e=>{t.push(e)}));let i=a(r,t),n=i[Math.floor(Math.random()*i.length)];return console.log(`Random attack: ${n}`),n}}},817:e=>{e.exports={renderPlayerCreationEl:function(){const e=document.querySelector("body");let t=document.createElement("div");t.classList.add("player-creation-container");let r=document.createElement("p");r.innerText="You are about to enter unfamiliar waters in an effort to neutralize enemy ships. Due to thick fog our strategy is simple, fire artillery and observe any contact. Intel suggests the enemy fleet contains 5 ships of varying sizes...\n  \n  Instructions:\n  \n  Using arial reconnaissance order fire on mapped coordinates. Hits will be recorded with an explosion marker, while misses will be indicated with a water marker.";let a=document.createElement("form");a.setAttribute("name","player-creation-form"),a.setAttribute("class","player-creation-form");let i=document.createElement("input");i.setAttribute("id","playerName"),i.setAttribute("type","text"),i.setAttribute("min","1"),i.required=!0,i.setAttribute("max","25"),i.setAttribute("placeholder","Player Name");let n=document.createElement("button");n.setAttribute("id","playerSubmit"),n.setAttribute("type","submit"),n.setAttribute("for","player-creation-form"),n.innerText="Launch Fleet",e.appendChild(t),t.appendChild(a),a.appendChild(r),a.appendChild(i),a.appendChild(n)},generateGameboardEl:function(e){const t=[...e.board.grid],r=document.querySelector(".main-content-container"),a=document.createElement("div"),i=document.createElement("table");i.setAttribute("class","gameboard-table");const n=document.createElement("th");n.innerText=`${e.name}'s Fleet`,a.appendChild(n);for(let r=0;r<10;r++){const a=document.createElement("tr");a.setAttribute("class","gameboard-row");for(let i=0;i<10;i++){const n=10*r+i;if(n<t.length){const r=document.createElement("td");a.appendChild(r),r.setAttribute("data-x",`${t[n].x}`),r.setAttribute("data-y",`${t[n].y}`),r.setAttribute("data-attacked",`${t[n].attacked}`),r.setAttribute("data-ship",`${t[n].shipName}`),r.setAttribute("class","gameboard-tile"),"Computer"===e.name?r.classList.add("enemy-tile"):"Computer"!==e.name&&r.classList.add("player-tile")}}i.appendChild(a)}a.appendChild(i),r.appendChild(a)},handleHitsAndMisses:function(){document.querySelectorAll(".gameboard-tile").forEach((e=>{let t=e.getAttribute("data-attacked"),r=e.getAttribute("data-ship");"true"===t&&"undefined"===r&&e.classList.add("missed"),"true"===t&&"undefined"!==r&&e.classList.add("hit")}))},handlePlayerGrid:function(){document.querySelectorAll(".player-tile").forEach((e=>{"undefined"!==e.getAttribute("data-ship")&&e.classList.add("occupied")}))}}},404:(e,t,r)=>{const{renderPlayerCreationEl:a,generateGameboardEl:i,handleHitsAndMisses:n,handlePlayerGrid:s}=r(817),{player:o}=r(507),{computerLegalAttack:l}=r(496);e.exports={game:()=>({playerOneName:void 0,playerTwoName:"Computer",playerOne:void 0,PlayerTwo:void 0,init:function(){a(),this.cacheDom(),this.startEventListening()},cacheDom:function(){this.formContainer=document.querySelector(".player-creation-container"),this.formSubmitBtn=document.getElementById("playerSubmit"),this.formInput=document.getElementById("playerName")},startEventListening:function(){this.formSubmitBtn.addEventListener("click",(e=>{e.preventDefault(),this.playerOneName=this.formInput.value,this.formContainer.classList.add("hidden"),this.handleGameSetup()}))},handleGameSetup:function(){this.playerOne=o(this.playerOneName),this.PlayerTwo=o(this.playerTwoName),this.handlePlotting(),i(this.playerOne),i(this.PlayerTwo),s(),this.startAttackListening()},startAttackListening:function(){document.querySelectorAll(".enemy-tile").forEach((e=>{e.addEventListener("click",(e=>{e.target.setAttribute("data-attacked","true");let t=e.target.getAttribute("data-x"),r=e.target.getAttribute("data-y");this.PlayerTwo.board.receiveAttack(t,r);let a=l(this.playerOne);this.playerOne.board.receiveAttack(a.x,a.y),document.querySelectorAll(".player-tile").forEach((e=>{let t=e.getAttribute("data-x"),r=e.getAttribute("data-y");t===String(a.x)&&r===String(a.y)&&e.setAttribute("data-attacked","true")})),n()}),{once:!0})}))},handlePlotting:function(){this.playerOne.board.plotFleet(),this.PlayerTwo.board.plotFleet()}})}},498:(e,t,r)=>{const{ship:a}=r(643);e.exports={gameboard:()=>{let e=[];return{isGameOver:!1,grid:(()=>{for(let t=0;t<10;t++)for(let r=0;r<10;r++)e.push({x:t,y:r,shipName:void 0,attacked:!1});return e})(),missedShots:[],hits:[],sunkShips:[],myFleet:[a("Carrier"),a("Battleship"),a("Destroyer"),a("Submarine"),a("Patrol Boat")],receiveAttack:function(e,t){console.log(`Hit logged at ${e},${t}`),this.grid.forEach((r=>{if(r.x==e&&r.y==t)if(r.attacked=!0,void 0===r.shipName)this.missedShots.push({x:e,y:t});else switch(r.shipName){case"Carrier":this.hits.push({x:e,y:t}),this.myFleet[0].hit();break;case"Battleship":this.hits.push({x:e,y:t}),this.myFleet[1].hit();break;case"Destroyer":this.hits.push({x:e,y:t}),this.myFleet[2].hit();break;case"Submarine":this.hits.push({x:e,y:t}),this.myFleet[3].hit();break;case"Patrol Boat":this.hits.push({x:e,y:t}),this.myFleet[4].hit()}})),this.checkSunkShips()},plotFleet:function(){this.myFleet.forEach((e=>{e.location.forEach((t=>{this.grid.forEach((r=>{r.x===t.x&&r.y===t.y&&(r.shipName=e.name)}))}))}))},checkSunkShips:function(){this.myFleet.forEach((e=>{!0!==e.sunk||this.sunkShips.includes(e.name)||this.sunkShips.push(String(e.name)),this.checkGameOver()}))},checkGameOver:function(){5==this.sunkShips.length&&(this.isGameOver=!0,console.log("Game Over Triggered"))}}}}},225:e=>{const t=()=>Math.floor(10*Math.random());e.exports={randomNumZeroToNine:t,randomDirection:()=>{let e;return e=t()<=4?"horizontal":"vertical",e},determineSafePath:(e,t)=>{let r;return"horizontal"===e?r=t.x<=4?"right":"left":"vertical"===e&&(r=t.y<=4?"down":"up"),r},removeMatchingObjects:function(e,t){return e.filter((e=>!t.some((t=>e.x===t.x&&e.y===t.y))))}}},507:(e,t,r)=>{const{gameboard:a}=r(498);e.exports={player:e=>({name:e,isTurn:!1,board:a()})}},643:e=>{e.exports={ship:e=>({name:e,length:(e=>{switch(e){case"Carrier":return Number(5);case"Battleship":return Number(4);case"Destroyer":case"Submarine":return Number(3);case"Patrol Boat":return Number(2);default:throw new Error("Invalid ship type provided")}})(e),hits:0,sunk:!1,location:function(e){switch(e){case"Carrier":return[{x:0,y:0},{x:0,y:1},{x:0,y:2},{x:0,y:3},{x:0,y:4}];case"Battleship":return[{x:9,y:2},{x:9,y:3},{x:9,y:4},{x:9,y:5}];case"Destroyer":return[{x:5,y:4},{x:6,y:4},{x:7,y:4}];case"Submarine":return[{x:8,y:0},{x:8,y:1},{x:8,y:2}];case"Patrol Boat":return[{x:5,y:7},{x:6,y:7}];default:throw new Error("Error generating coordinates")}}(e),hit:function(){this.hits+=1,console.log("Hit detected!"),this.isSunk()},isSunk:function(){this.hits===this.length&&(this.sunk=!0,console.log(`${this.name} has been sunk`))}})}}},t={};function r(a){var i=t[a];if(void 0!==i)return i.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,r),n.exports}(()=>{const{game:e}=r(404);e().init()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNMLENBQ0VELEVBQUcsRUFDSEMsRUFBRyxHQUVMLENBQ0VELEVBQUcsRUFDSEMsRUFBRyxHQUVMLENBQ0VELEVBQUcsRUFDSEMsRUFBRyxJQUlULElBQUssWUFDSCxNQUFPLENBQ0wsQ0FDRUQsRUFBRyxFQUNIQyxFQUFHLEdBRUwsQ0FDRUQsRUFBRyxFQUNIQyxFQUFHLEdBRUwsQ0FDRUQsRUFBRyxFQUNIQyxFQUFHLElBSVQsSUFBSyxjQUNILE1BQU8sQ0FDTCxDQUNFRCxFQUFHLEVBQ0hDLEVBQUcsR0FFTCxDQUNFRCxFQUFHLEVBQ0hDLEVBQUcsSUFJVCxRQUNFLE1BQU0sSUFBSStHLE1BQU0sZ0NBR3RCLENBT1lFLENBQWdCSixHQUMxQnBCLElBQUssV0FDSGpDLEtBQUtuRCxNQUFRLEVBQ2JPLFFBQVFDLElBQUksaUJBQ1oyQyxLQUFLMEQsUUFDUCxFQUNBQSxPQUFRLFdBQ0YxRCxLQUFLbkQsT0FBU21ELEtBQUs3QyxTQUNyQjZDLEtBQUtxQyxNQUFPLEVBQ1pqRixRQUFRQyxJQUFJLEdBQUcyQyxLQUFLbkIsc0JBRXhCLEksR0NyTEE4RSxFQUEyQixDQUFDLEVBR2hDLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUJsRSxJQUFqQm1FLEVBQ0gsT0FBT0EsRUFBYS9ILFFBR3JCLElBQUlELEVBQVM2SCxFQUF5QkUsR0FBWSxDQUdqRDlILFFBQVMsQ0FBQyxHQU9YLE9BSEFnSSxFQUFvQkYsR0FBVS9ILEVBQVFBLEVBQU9DLFFBQVM2SCxHQUcvQzlILEVBQU9DLE9BQ2YsQyxNQ3RCQSxNQUFNLEtBQUUwRCxHQUFTLEVBQVEsS0FFVEEsSUFDUk0sTSIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9jb21wdXRlckFjdGlvbnMuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL2RvbUNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL2dhbWVMb2dpYy5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9oZWxwZXJzLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9wbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL3NoaXAuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHJlbW92ZU1hdGNoaW5nT2JqZWN0cyB9ID0gcmVxdWlyZShcIi4vaGVscGVyc1wiKTtcblxuZnVuY3Rpb24gY29tcHV0ZXJMZWdhbEF0dGFjayhwbGF5ZXIpIHtcbiAgbGV0IGlsbGVnYWxNb3ZlcyA9IFtdO1xuICBsZXQgYXR0YWNrT3B0aW9ucyA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwOyBqKyspIHtcbiAgICAgIGF0dGFja09wdGlvbnMucHVzaCh7XG4gICAgICAgIHg6IGksXG4gICAgICAgIHk6IGosXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwbGF5ZXIuYm9hcmQubWlzc2VkU2hvdHMuZm9yRWFjaCgob2JqKSA9PiB7XG4gICAgaWxsZWdhbE1vdmVzLnB1c2gob2JqKTtcbiAgfSk7XG5cbiAgcGxheWVyLmJvYXJkLmhpdHMuZm9yRWFjaCgob2JqKSA9PiB7XG4gICAgaWxsZWdhbE1vdmVzLnB1c2gob2JqKTtcbiAgfSk7XG5cbiAgbGV0IGxlZ2FsQXR0YWNrcyA9IHJlbW92ZU1hdGNoaW5nT2JqZWN0cyhhdHRhY2tPcHRpb25zLCBpbGxlZ2FsTW92ZXMpO1xuXG4gIGxldCByYW5kb21MZWdhbEF0dGFjayA9XG4gICAgbGVnYWxBdHRhY2tzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGxlZ2FsQXR0YWNrcy5sZW5ndGgpXTtcblxuICBjb25zb2xlLmxvZyhgUmFuZG9tIGF0dGFjazogJHtyYW5kb21MZWdhbEF0dGFja31gKTtcbiAgcmV0dXJuIHJhbmRvbUxlZ2FsQXR0YWNrO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgY29tcHV0ZXJMZWdhbEF0dGFjayB9O1xuIiwiZnVuY3Rpb24gcmVuZGVyUGxheWVyQ3JlYXRpb25FbCgpIHtcbiAgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpO1xuICBsZXQgY29udGFpbmVyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBjb250YWluZXJFbC5jbGFzc0xpc3QuYWRkKFwicGxheWVyLWNyZWF0aW9uLWNvbnRhaW5lclwiKTtcblxuICBsZXQgb3ZlcnZpZXdUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG5cbiAgb3ZlcnZpZXdUZXh0LmlubmVyVGV4dCA9IGBZb3UgYXJlIGFib3V0IHRvIGVudGVyIHVuZmFtaWxpYXIgd2F0ZXJzIGluIGFuIGVmZm9ydCB0byBuZXV0cmFsaXplIGVuZW15IHNoaXBzLiBEdWUgdG8gdGhpY2sgZm9nIG91ciBzdHJhdGVneSBpcyBzaW1wbGUsIGZpcmUgYXJ0aWxsZXJ5IGFuZCBvYnNlcnZlIGFueSBjb250YWN0LiBJbnRlbCBzdWdnZXN0cyB0aGUgZW5lbXkgZmxlZXQgY29udGFpbnMgNSBzaGlwcyBvZiB2YXJ5aW5nIHNpemVzLi4uXG4gIFxuICBJbnN0cnVjdGlvbnM6XG4gIFxuICBVc2luZyBhcmlhbCByZWNvbm5haXNzYW5jZSBvcmRlciBmaXJlIG9uIG1hcHBlZCBjb29yZGluYXRlcy4gSGl0cyB3aWxsIGJlIHJlY29yZGVkIHdpdGggYW4gZXhwbG9zaW9uIG1hcmtlciwgd2hpbGUgbWlzc2VzIHdpbGwgYmUgaW5kaWNhdGVkIHdpdGggYSB3YXRlciBtYXJrZXIuYDtcblxuICBsZXQgZm9ybUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIik7XG4gIGZvcm1FbC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwicGxheWVyLWNyZWF0aW9uLWZvcm1cIik7XG4gIGZvcm1FbC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInBsYXllci1jcmVhdGlvbi1mb3JtXCIpO1xuXG4gIGxldCBpbnB1dEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICBpbnB1dEVsLnNldEF0dHJpYnV0ZShcImlkXCIsIFwicGxheWVyTmFtZVwiKTtcbiAgaW5wdXRFbC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgaW5wdXRFbC5zZXRBdHRyaWJ1dGUoXCJtaW5cIiwgXCIxXCIpO1xuICBpbnB1dEVsLnJlcXVpcmVkID0gdHJ1ZTtcbiAgaW5wdXRFbC5zZXRBdHRyaWJ1dGUoXCJtYXhcIiwgXCIyNVwiKTtcbiAgaW5wdXRFbC5zZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiLCBcIlBsYXllciBOYW1lXCIpO1xuXG4gIGxldCBidG5FbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gIGJ0bkVsLnNldEF0dHJpYnV0ZShcImlkXCIsIFwicGxheWVyU3VibWl0XCIpO1xuICBidG5FbC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwic3VibWl0XCIpO1xuICBidG5FbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJwbGF5ZXItY3JlYXRpb24tZm9ybVwiKTtcbiAgYnRuRWwuaW5uZXJUZXh0ID0gXCJMYXVuY2ggRmxlZXRcIjtcblxuICBib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lckVsKTtcbiAgY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoZm9ybUVsKTtcbiAgZm9ybUVsLmFwcGVuZENoaWxkKG92ZXJ2aWV3VGV4dCk7XG4gIGZvcm1FbC5hcHBlbmRDaGlsZChpbnB1dEVsKTtcbiAgZm9ybUVsLmFwcGVuZENoaWxkKGJ0bkVsKTtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVHYW1lYm9hcmRFbChwbGF5ZXIpIHtcbiAgY29uc3QgZGF0YUFycmF5ID0gWy4uLnBsYXllci5ib2FyZC5ncmlkXTtcbiAgY29uc3QgbWFpbkNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1jb250ZW50LWNvbnRhaW5lclwiKTtcbiAgY29uc3QgdGFibGVDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0YWJsZVwiKTtcbiAgdGFibGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJnYW1lYm9hcmQtdGFibGVcIik7XG4gIGNvbnN0IHBsYXllckhlYWRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7XG4gIHBsYXllckhlYWRpbmcuaW5uZXJUZXh0ID0gYCR7cGxheWVyLm5hbWV9J3MgRmxlZXRgO1xuICB0YWJsZUNvbnRhaW5lci5hcHBlbmRDaGlsZChwbGF5ZXJIZWFkaW5nKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIik7XG4gICAgcm93LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZ2FtZWJvYXJkLXJvd1wiKTtcblxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGorKykge1xuICAgICAgY29uc3QgZGF0YUluZGV4ID0gaSAqIDEwICsgajtcblxuICAgICAgaWYgKGRhdGFJbmRleCA8IGRhdGFBcnJheS5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKGNlbGwpO1xuICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZShcImRhdGEteFwiLCBgJHtkYXRhQXJyYXlbZGF0YUluZGV4XS54fWApO1xuICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZShcImRhdGEteVwiLCBgJHtkYXRhQXJyYXlbZGF0YUluZGV4XS55fWApO1xuICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZShcImRhdGEtYXR0YWNrZWRcIiwgYCR7ZGF0YUFycmF5W2RhdGFJbmRleF0uYXR0YWNrZWR9YCk7XG4gICAgICAgIGNlbGwuc2V0QXR0cmlidXRlKFwiZGF0YS1zaGlwXCIsIGAke2RhdGFBcnJheVtkYXRhSW5kZXhdLnNoaXBOYW1lfWApO1xuICAgICAgICBjZWxsLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZ2FtZWJvYXJkLXRpbGVcIik7XG4gICAgICAgIC8vIE9ubHkgYWRkIGV2ZW50IGxpc3RlbmVycyB0byBlbmVteSBnYW1lYm9hcmRcbiAgICAgICAgaWYgKHBsYXllci5uYW1lID09PSBcIkNvbXB1dGVyXCIpIHtcbiAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoXCJlbmVteS10aWxlXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHBsYXllci5uYW1lICE9PSBcIkNvbXB1dGVyXCIpIHtcbiAgICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoXCJwbGF5ZXItdGlsZVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0YWJsZS5hcHBlbmRDaGlsZChyb3cpO1xuICB9XG4gIHRhYmxlQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgbWFpbkNvbnRhaW5lci5hcHBlbmRDaGlsZCh0YWJsZUNvbnRhaW5lcik7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUhpdHNBbmRNaXNzZXMoKSB7XG4gIGNvbnN0IGFsbEdyaWRJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZ2FtZWJvYXJkLXRpbGVcIik7XG4gIGFsbEdyaWRJdGVtcy5mb3JFYWNoKCh0aWxlKSA9PiB7XG4gICAgbGV0IHN0YXR1cyA9IHRpbGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1hdHRhY2tlZFwiKTtcbiAgICBsZXQgbmFtZSA9IHRpbGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1zaGlwXCIpO1xuICAgIGlmIChzdGF0dXMgPT09IFwidHJ1ZVwiICYmIG5hbWUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRpbGUuY2xhc3NMaXN0LmFkZChcIm1pc3NlZFwiKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSBcInRydWVcIiAmJiBuYW1lICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB0aWxlLmNsYXNzTGlzdC5hZGQoXCJoaXRcIik7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlUGxheWVyR3JpZCgpIHtcbiAgY29uc3QgYWxsUGxheWVyVGllcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucGxheWVyLXRpbGVcIik7XG4gIGFsbFBsYXllclRpZXMuZm9yRWFjaCgodGlsZSkgPT4ge1xuICAgIGxldCBuYW1lID0gdGlsZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNoaXBcIik7XG4gICAgaWYgKG5hbWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIHRpbGUuY2xhc3NMaXN0LmFkZChcIm9jY3VwaWVkXCIpO1xuICAgIH1cbiAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICByZW5kZXJQbGF5ZXJDcmVhdGlvbkVsLFxuICBnZW5lcmF0ZUdhbWVib2FyZEVsLFxuICBoYW5kbGVIaXRzQW5kTWlzc2VzLFxuICBoYW5kbGVQbGF5ZXJHcmlkLFxufTtcbiIsImNvbnN0IHtcbiAgcmVuZGVyUGxheWVyQ3JlYXRpb25FbCxcbiAgZ2VuZXJhdGVHYW1lYm9hcmRFbCxcbiAgaGFuZGxlSGl0c0FuZE1pc3NlcyxcbiAgaGFuZGxlUGxheWVyR3JpZCxcbn0gPSByZXF1aXJlKFwiLi9kb21Db250cm9sbGVyXCIpO1xuY29uc3QgeyBwbGF5ZXIgfSA9IHJlcXVpcmUoXCIuL3BsYXllclwiKTtcbmNvbnN0IHsgY29tcHV0ZXJMZWdhbEF0dGFjayB9ID0gcmVxdWlyZShcIi4vY29tcHV0ZXJBY3Rpb25zXCIpO1xuXG5jb25zdCBnYW1lID0gKCkgPT4ge1xuICByZXR1cm4ge1xuICAgIHBsYXllck9uZU5hbWU6IHVuZGVmaW5lZCxcbiAgICBwbGF5ZXJUd29OYW1lOiBcIkNvbXB1dGVyXCIsXG4gICAgcGxheWVyT25lOiB1bmRlZmluZWQsXG4gICAgUGxheWVyVHdvOiB1bmRlZmluZWQsXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgcmVuZGVyUGxheWVyQ3JlYXRpb25FbCgpO1xuICAgICAgdGhpcy5jYWNoZURvbSgpO1xuICAgICAgdGhpcy5zdGFydEV2ZW50TGlzdGVuaW5nKCk7XG4gICAgfSxcbiAgICBjYWNoZURvbTogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5mb3JtQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGF5ZXItY3JlYXRpb24tY29udGFpbmVyXCIpO1xuICAgICAgdGhpcy5mb3JtU3VibWl0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5ZXJTdWJtaXRcIik7XG4gICAgICB0aGlzLmZvcm1JbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheWVyTmFtZVwiKTtcbiAgICB9LFxuICAgIHN0YXJ0RXZlbnRMaXN0ZW5pbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuZm9ybVN1Ym1pdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnBsYXllck9uZU5hbWUgPSB0aGlzLmZvcm1JbnB1dC52YWx1ZTtcbiAgICAgICAgdGhpcy5mb3JtQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgICAgIHRoaXMuaGFuZGxlR2FtZVNldHVwKCk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGhhbmRsZUdhbWVTZXR1cDogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5wbGF5ZXJPbmUgPSBwbGF5ZXIodGhpcy5wbGF5ZXJPbmVOYW1lKTtcbiAgICAgIHRoaXMuUGxheWVyVHdvID0gcGxheWVyKHRoaXMucGxheWVyVHdvTmFtZSk7XG4gICAgICB0aGlzLmhhbmRsZVBsb3R0aW5nKCk7XG4gICAgICBnZW5lcmF0ZUdhbWVib2FyZEVsKHRoaXMucGxheWVyT25lKTtcbiAgICAgIGdlbmVyYXRlR2FtZWJvYXJkRWwodGhpcy5QbGF5ZXJUd28pO1xuICAgICAgaGFuZGxlUGxheWVyR3JpZCgpO1xuICAgICAgdGhpcy5zdGFydEF0dGFja0xpc3RlbmluZygpO1xuICAgIH0sXG4gICAgc3RhcnRBdHRhY2tMaXN0ZW5pbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbnN0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5lbmVteS10aWxlXCIpO1xuICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgXCJjbGlja1wiLFxuICAgICAgICAgIChlKSA9PiB7XG4gICAgICAgICAgICBlLnRhcmdldC5zZXRBdHRyaWJ1dGUoXCJkYXRhLWF0dGFja2VkXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgIGxldCBlbmVteVggPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXhcIik7XG4gICAgICAgICAgICBsZXQgZW5lbXlZID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS15XCIpO1xuICAgICAgICAgICAgdGhpcy5QbGF5ZXJUd28uYm9hcmQucmVjZWl2ZUF0dGFjayhlbmVteVgsIGVuZW15WSk7XG4gICAgICAgICAgICBsZXQgY29tcHV0ZXJBdHRhY2sgPSBjb21wdXRlckxlZ2FsQXR0YWNrKHRoaXMucGxheWVyT25lKTtcbiAgICAgICAgICAgIHRoaXMucGxheWVyT25lLmJvYXJkLnJlY2VpdmVBdHRhY2soXG4gICAgICAgICAgICAgIGNvbXB1dGVyQXR0YWNrLngsXG4gICAgICAgICAgICAgIGNvbXB1dGVyQXR0YWNrLnlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb25zdCBwbGF5ZXJPbmVUaWxlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucGxheWVyLXRpbGVcIik7XG4gICAgICAgICAgICBwbGF5ZXJPbmVUaWxlcy5mb3JFYWNoKCh0aWxlKSA9PiB7XG4gICAgICAgICAgICAgIGxldCBwbGF5ZXJYID0gdGlsZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXhcIik7XG4gICAgICAgICAgICAgIGxldCBwbGF5ZXJZID0gdGlsZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXlcIik7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBwbGF5ZXJYID09PSBTdHJpbmcoY29tcHV0ZXJBdHRhY2sueCkgJiZcbiAgICAgICAgICAgICAgICBwbGF5ZXJZID09PSBTdHJpbmcoY29tcHV0ZXJBdHRhY2sueSlcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGlsZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWF0dGFja2VkXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBoYW5kbGVIaXRzQW5kTWlzc2VzKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IG9uY2U6IHRydWUgfVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBoYW5kbGVQbG90dGluZzogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5wbGF5ZXJPbmUuYm9hcmQucGxvdEZsZWV0KCk7XG4gICAgICB0aGlzLlBsYXllclR3by5ib2FyZC5wbG90RmxlZXQoKTtcbiAgICB9LFxuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7IGdhbWUgfTtcbiIsImNvbnN0IHsgc2hpcCB9ID0gcmVxdWlyZShcIi4vc2hpcFwiKTtcblxuY29uc3QgZ2FtZWJvYXJkID0gKCkgPT4ge1xuICBsZXQgZ3JpZEFyciA9IFtdO1xuXG4gIGNvbnN0IGdlbmVyYXRlR3JpZCA9ICgpID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGorKykge1xuICAgICAgICBncmlkQXJyLnB1c2goe1xuICAgICAgICAgIHg6IGksXG4gICAgICAgICAgeTogaixcbiAgICAgICAgICBzaGlwTmFtZTogdW5kZWZpbmVkLFxuICAgICAgICAgIGF0dGFja2VkOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGdyaWRBcnI7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpc0dhbWVPdmVyOiBmYWxzZSxcbiAgICBncmlkOiBnZW5lcmF0ZUdyaWQoKSxcbiAgICBtaXNzZWRTaG90czogW10sXG4gICAgaGl0czogW10sXG4gICAgc3Vua1NoaXBzOiBbXSxcbiAgICBteUZsZWV0OiBbXG4gICAgICBzaGlwKFwiQ2FycmllclwiKSxcbiAgICAgIHNoaXAoXCJCYXR0bGVzaGlwXCIpLFxuICAgICAgc2hpcChcIkRlc3Ryb3llclwiKSxcbiAgICAgIHNoaXAoXCJTdWJtYXJpbmVcIiksXG4gICAgICBzaGlwKFwiUGF0cm9sIEJvYXRcIiksXG4gICAgXSxcbiAgICByZWNlaXZlQXR0YWNrOiBmdW5jdGlvbiAoeENvb3JkLCB5Q29vcmQpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBIaXQgbG9nZ2VkIGF0ICR7eENvb3JkfSwke3lDb29yZH1gKTtcbiAgICAgIHRoaXMuZ3JpZC5mb3JFYWNoKChvYmopID0+IHtcbiAgICAgICAgaWYgKG9iai54ID09IHhDb29yZCAmJiBvYmoueSA9PSB5Q29vcmQpIHtcbiAgICAgICAgICBvYmouYXR0YWNrZWQgPSB0cnVlO1xuICAgICAgICAgIGlmIChvYmouc2hpcE5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5taXNzZWRTaG90cy5wdXNoKHsgeDogeENvb3JkLCB5OiB5Q29vcmQgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN3aXRjaCAob2JqLnNoaXBOYW1lKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJDYXJyaWVyXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5oaXRzLnB1c2goeyB4OiB4Q29vcmQsIHk6IHlDb29yZCB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLm15RmxlZXRbMF0uaGl0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgXCJCYXR0bGVzaGlwXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5oaXRzLnB1c2goeyB4OiB4Q29vcmQsIHk6IHlDb29yZCB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLm15RmxlZXRbMV0uaGl0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgXCJEZXN0cm95ZXJcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmhpdHMucHVzaCh7IHg6IHhDb29yZCwgeTogeUNvb3JkIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMubXlGbGVldFsyXS5oaXQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSBcIlN1Ym1hcmluZVwiOlxuICAgICAgICAgICAgICAgIHRoaXMuaGl0cy5wdXNoKHsgeDogeENvb3JkLCB5OiB5Q29vcmQgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5teUZsZWV0WzNdLmhpdCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlIFwiUGF0cm9sIEJvYXRcIjpcbiAgICAgICAgICAgICAgICB0aGlzLmhpdHMucHVzaCh7IHg6IHhDb29yZCwgeTogeUNvb3JkIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMubXlGbGVldFs0XS5oaXQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLmNoZWNrU3Vua1NoaXBzKCk7XG4gICAgfSxcbiAgICBwbG90RmxlZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBmbGVldCA9IHRoaXMubXlGbGVldDtcbiAgICAgIGZsZWV0LmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgICAgbGV0IHBsb3RzID0gc2hpcC5sb2NhdGlvbjtcbiAgICAgICAgcGxvdHMuZm9yRWFjaCgoY29vcmQpID0+IHtcbiAgICAgICAgICB0aGlzLmdyaWQuZm9yRWFjaCgob2JqKSA9PiB7XG4gICAgICAgICAgICBpZiAob2JqLnggPT09IGNvb3JkLnggJiYgb2JqLnkgPT09IGNvb3JkLnkpIHtcbiAgICAgICAgICAgICAgb2JqLnNoaXBOYW1lID0gc2hpcC5uYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgY2hlY2tTdW5rU2hpcHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBmbGVldCA9IHRoaXMubXlGbGVldDtcbiAgICAgIGZsZWV0LmZvckVhY2goKHNoaXApID0+IHtcbiAgICAgICAgaWYgKHNoaXAuc3VuayA9PT0gdHJ1ZSAmJiAhdGhpcy5zdW5rU2hpcHMuaW5jbHVkZXMoc2hpcC5uYW1lKSkge1xuICAgICAgICAgIHRoaXMuc3Vua1NoaXBzLnB1c2goU3RyaW5nKHNoaXAubmFtZSkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hlY2tHYW1lT3ZlcigpO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIGNoZWNrR2FtZU92ZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCB0cmlnZ2VyID0gdGhpcy5zdW5rU2hpcHMubGVuZ3RoO1xuICAgICAgaWYgKHRyaWdnZXIgPT0gNSkge1xuICAgICAgICB0aGlzLmlzR2FtZU92ZXIgPSB0cnVlO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkdhbWUgT3ZlciBUcmlnZ2VyZWRcIik7XG4gICAgICB9XG4gICAgfSxcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0geyBnYW1lYm9hcmQgfTtcbiIsImNvbnN0IHJhbmRvbU51bVplcm9Ub05pbmUgPSAoKSA9PiB7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG59O1xuXG5jb25zdCByYW5kb21EaXJlY3Rpb24gPSAoKSA9PiB7XG4gIGxldCBkaXJlY3Rpb247XG4gIGxldCBjb2luRmxpcCA9IHJhbmRvbU51bVplcm9Ub05pbmUoKTtcblxuICBpZiAoY29pbkZsaXAgPD0gNCkge1xuICAgIGRpcmVjdGlvbiA9IFwiaG9yaXpvbnRhbFwiO1xuICB9IGVsc2Uge1xuICAgIGRpcmVjdGlvbiA9IFwidmVydGljYWxcIjtcbiAgfVxuXG4gIHJldHVybiBkaXJlY3Rpb247XG59O1xuXG5jb25zdCBkZXRlcm1pbmVTYWZlUGF0aCA9IChkaXJlY3Rpb24sIHN0YXJ0KSA9PiB7XG4gIGxldCBwYXRoO1xuXG4gIGlmIChkaXJlY3Rpb24gPT09IFwiaG9yaXpvbnRhbFwiKSB7XG4gICAgaWYgKHN0YXJ0LnggPD0gNCkge1xuICAgICAgcGF0aCA9IFwicmlnaHRcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgcGF0aCA9IFwibGVmdFwiO1xuICAgIH1cbiAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09IFwidmVydGljYWxcIikge1xuICAgIGlmIChzdGFydC55IDw9IDQpIHtcbiAgICAgIHBhdGggPSBcImRvd25cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgcGF0aCA9IFwidXBcIjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBhdGg7XG59O1xuXG5mdW5jdGlvbiByZW1vdmVNYXRjaGluZ09iamVjdHMoYXJyT25lLCBhcnJUd28pIHtcbiAgcmV0dXJuIGFyck9uZS5maWx0ZXIoXG4gICAgKG9iak9uZSkgPT5cbiAgICAgICFhcnJUd28uc29tZSgob2JqVHdvKSA9PiBvYmpPbmUueCA9PT0gb2JqVHdvLnggJiYgb2JqT25lLnkgPT09IG9ialR3by55KVxuICApO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcmFuZG9tTnVtWmVyb1RvTmluZSxcbiAgcmFuZG9tRGlyZWN0aW9uLFxuICBkZXRlcm1pbmVTYWZlUGF0aCxcbiAgcmVtb3ZlTWF0Y2hpbmdPYmplY3RzLFxufTtcbiIsImNvbnN0IHsgZ2FtZWJvYXJkIH0gPSByZXF1aXJlKFwiLi9nYW1lYm9hcmQuanNcIik7XG5cbmNvbnN0IHBsYXllciA9IChuYW1lKSA9PiB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogbmFtZSxcbiAgICBpc1R1cm46IGZhbHNlLFxuICAgIGJvYXJkOiBnYW1lYm9hcmQoKSxcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0geyBwbGF5ZXIgfTtcbiIsIi8vIGNvbnN0IHtcbi8vICAgcmFuZG9tTnVtWmVyb1RvTmluZSxcbi8vICAgcmFuZG9tRGlyZWN0aW9uLFxuLy8gICBkZXRlcm1pbmVTYWZlUGF0aCxcbi8vIH0gPSByZXF1aXJlKFwiLi9oZWxwZXJzLmpzXCIpO1xuXG5jb25zdCBzaGlwID0gKHR5cGUpID0+IHtcbiAgY29uc3QgbGVuZ3RoID0gKHR5cGUpID0+IHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgXCJDYXJyaWVyXCI6XG4gICAgICAgIHJldHVybiBOdW1iZXIoNSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIkJhdHRsZXNoaXBcIjpcbiAgICAgICAgcmV0dXJuIE51bWJlcig0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiRGVzdHJveWVyXCI6XG4gICAgICAgIHJldHVybiBOdW1iZXIoMyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIlN1Ym1hcmluZVwiOlxuICAgICAgICByZXR1cm4gTnVtYmVyKDMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJQYXRyb2wgQm9hdFwiOlxuICAgICAgICByZXR1cm4gTnVtYmVyKDIpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc2hpcCB0eXBlIHByb3ZpZGVkXCIpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH07XG5cbiAgLy8gY29uc3QgZ2VuZXJhdGVDb29yZGluYXRlcyA9IChwYXRoLCBsZW5ndGgsIHN0YXJ0KSA9PiB7XG4gIC8vICAgbGV0IGxpc3QgPSBbXTtcbiAgLy8gICBsaXN0LnB1c2goc3RhcnQpO1xuXG4gIC8vICAgaWYgKHBhdGggPT0gXCJsZWZ0XCIpIHtcbiAgLy8gICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgLy8gICAgICAgbGlzdC5wdXNoKHsgeDogc3RhcnQueCAtIGksIHk6IHN0YXJ0LnkgfSk7XG4gIC8vICAgICB9XG4gIC8vICAgfSBlbHNlIGlmIChwYXRoID09IFwicmlnaHRcIikge1xuICAvLyAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykge1xuICAvLyAgICAgICBsaXN0LnB1c2goeyB4OiBzdGFydC54ICsgaSwgeTogc3RhcnQueSB9KTtcbiAgLy8gICAgIH1cbiAgLy8gICB9IGVsc2UgaWYgKHBhdGggPT0gXCJ1cFwiKSB7XG4gIC8vICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gIC8vICAgICAgIGxpc3QucHVzaCh7IHg6IHN0YXJ0LngsIHk6IHN0YXJ0LnkgLSBpIH0pO1xuICAvLyAgICAgfVxuICAvLyAgIH0gZWxzZSBpZiAocGF0aCA9PSBcImRvd25cIikge1xuICAvLyAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykge1xuICAvLyAgICAgICBsaXN0LnB1c2goeyB4OiBzdGFydC54LCB5OiBzdGFydC55ICsgaSB9KTtcbiAgLy8gICAgIH1cbiAgLy8gICB9XG4gIC8vICAgcmV0dXJuIGxpc3Q7XG4gIC8vIH07XG5cbiAgLy8gY29uc3QgcmFuZG9tUGxhY2VtZW50ID0gKHNoaXBMZW5ndGgpID0+IHtcbiAgLy8gICBsZXQgc2hpcENvb3JkaW5hdGVzID0gW107XG4gIC8vICAgbGV0IHN0YXJ0aW5nUG9pbnQgPSB7XG4gIC8vICAgICB4OiByYW5kb21OdW1aZXJvVG9OaW5lKCksXG4gIC8vICAgICB5OiByYW5kb21OdW1aZXJvVG9OaW5lKCksXG4gIC8vICAgfTtcblxuICAvLyAgIGxldCBkaXJlY3Rpb24gPSByYW5kb21EaXJlY3Rpb24oKTtcblxuICAvLyAgIGxldCBwYXRoID0gZGV0ZXJtaW5lU2FmZVBhdGgoZGlyZWN0aW9uLCBzdGFydGluZ1BvaW50KTtcblxuICAvLyAgIHNoaXBDb29yZGluYXRlcyA9IGdlbmVyYXRlQ29vcmRpbmF0ZXMocGF0aCwgc2hpcExlbmd0aCwgc3RhcnRpbmdQb2ludCk7XG5cbiAgLy8gICByZXR1cm4gc2hpcENvb3JkaW5hdGVzO1xuICAvLyB9O1xuXG4gIGZ1bmN0aW9uIHJhbmRvbVBsYWNlbWVudChzaGlwVHlwZSkge1xuICAgIHN3aXRjaCAoc2hpcFR5cGUpIHtcbiAgICAgIGNhc2UgXCJDYXJyaWVyXCI6XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgeTogMSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICB5OiAyLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgIHk6IDMsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgeTogNCxcbiAgICAgICAgICB9LFxuICAgICAgICBdO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJCYXR0bGVzaGlwXCI6XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgeDogOSxcbiAgICAgICAgICAgIHk6IDIsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB4OiA5LFxuICAgICAgICAgICAgeTogMyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHg6IDksXG4gICAgICAgICAgICB5OiA0LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgeDogOSxcbiAgICAgICAgICAgIHk6IDUsXG4gICAgICAgICAgfSxcbiAgICAgICAgXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiRGVzdHJveWVyXCI6XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgeDogNSxcbiAgICAgICAgICAgIHk6IDQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB4OiA2LFxuICAgICAgICAgICAgeTogNCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHg6IDcsXG4gICAgICAgICAgICB5OiA0LFxuICAgICAgICAgIH0sXG4gICAgICAgIF07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIlN1Ym1hcmluZVwiOlxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHg6IDgsXG4gICAgICAgICAgICB5OiAwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgeDogOCxcbiAgICAgICAgICAgIHk6IDEsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB4OiA4LFxuICAgICAgICAgICAgeTogMixcbiAgICAgICAgICB9LFxuICAgICAgICBdO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJQYXRyb2wgQm9hdFwiOlxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHg6IDUsXG4gICAgICAgICAgICB5OiA3LFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgeDogNixcbiAgICAgICAgICAgIHk6IDcsXG4gICAgICAgICAgfSxcbiAgICAgICAgXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBnZW5lcmF0aW5nIGNvb3JkaW5hdGVzXCIpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG5hbWU6IHR5cGUsXG4gICAgbGVuZ3RoOiBsZW5ndGgodHlwZSksXG4gICAgaGl0czogMCxcbiAgICBzdW5rOiBmYWxzZSxcbiAgICBsb2NhdGlvbjogcmFuZG9tUGxhY2VtZW50KHR5cGUpLFxuICAgIGhpdDogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5oaXRzICs9IDE7XG4gICAgICBjb25zb2xlLmxvZyhcIkhpdCBkZXRlY3RlZCFcIik7XG4gICAgICB0aGlzLmlzU3VuaygpO1xuICAgIH0sXG4gICAgaXNTdW5rOiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5oaXRzID09PSB0aGlzLmxlbmd0aCkge1xuICAgICAgICB0aGlzLnN1bmsgPSB0cnVlO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt0aGlzLm5hbWV9IGhhcyBiZWVuIHN1bmtgKTtcbiAgICAgIH1cbiAgICB9LFxuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7IHNoaXAgfTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJjb25zdCB7IGdhbWUgfSA9IHJlcXVpcmUoXCIuL2dhbWVMb2dpY1wiKTtcblxuY29uc3QgbmV3R2FtZSA9IGdhbWUoKTtcbm5ld0dhbWUuaW5pdCgpO1xuIl0sIm5hbWVzIjpbInJlbW92ZU1hdGNoaW5nT2JqZWN0cyIsIm1vZHVsZSIsImV4cG9ydHMiLCJjb21wdXRlckxlZ2FsQXR0YWNrIiwicGxheWVyIiwiaWxsZWdhbE1vdmVzIiwiYXR0YWNrT3B0aW9ucyIsImkiLCJqIiwicHVzaCIsIngiLCJ5IiwiYm9hcmQiLCJtaXNzZWRTaG90cyIsImZvckVhY2giLCJvYmoiLCJoaXRzIiwibGVnYWxBdHRhY2tzIiwicmFuZG9tTGVnYWxBdHRhY2siLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJsZW5ndGgiLCJjb25zb2xlIiwibG9nIiwicmVuZGVyUGxheWVyQ3JlYXRpb25FbCIsImJvZHkiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250YWluZXJFbCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJvdmVydmlld1RleHQiLCJpbm5lclRleHQiLCJmb3JtRWwiLCJzZXRBdHRyaWJ1dGUiLCJpbnB1dEVsIiwicmVxdWlyZWQiLCJidG5FbCIsImFwcGVuZENoaWxkIiwiZ2VuZXJhdGVHYW1lYm9hcmRFbCIsImRhdGFBcnJheSIsImdyaWQiLCJtYWluQ29udGFpbmVyIiwidGFibGVDb250YWluZXIiLCJ0YWJsZSIsInBsYXllckhlYWRpbmciLCJuYW1lIiwicm93IiwiZGF0YUluZGV4IiwiY2VsbCIsImF0dGFja2VkIiwic2hpcE5hbWUiLCJoYW5kbGVIaXRzQW5kTWlzc2VzIiwicXVlcnlTZWxlY3RvckFsbCIsInRpbGUiLCJzdGF0dXMiLCJnZXRBdHRyaWJ1dGUiLCJoYW5kbGVQbGF5ZXJHcmlkIiwiZ2FtZSIsInBsYXllck9uZU5hbWUiLCJ1bmRlZmluZWQiLCJwbGF5ZXJUd29OYW1lIiwicGxheWVyT25lIiwiUGxheWVyVHdvIiwiaW5pdCIsInRoaXMiLCJjYWNoZURvbSIsInN0YXJ0RXZlbnRMaXN0ZW5pbmciLCJmb3JtQ29udGFpbmVyIiwiZm9ybVN1Ym1pdEJ0biIsImdldEVsZW1lbnRCeUlkIiwiZm9ybUlucHV0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInZhbHVlIiwiaGFuZGxlR2FtZVNldHVwIiwiaGFuZGxlUGxvdHRpbmciLCJzdGFydEF0dGFja0xpc3RlbmluZyIsInRhcmdldCIsImVuZW15WCIsImVuZW15WSIsInJlY2VpdmVBdHRhY2siLCJjb21wdXRlckF0dGFjayIsInBsYXllclgiLCJwbGF5ZXJZIiwiU3RyaW5nIiwib25jZSIsInBsb3RGbGVldCIsInNoaXAiLCJnYW1lYm9hcmQiLCJncmlkQXJyIiwiaXNHYW1lT3ZlciIsImdlbmVyYXRlR3JpZCIsInN1bmtTaGlwcyIsIm15RmxlZXQiLCJ4Q29vcmQiLCJ5Q29vcmQiLCJoaXQiLCJjaGVja1N1bmtTaGlwcyIsImxvY2F0aW9uIiwiY29vcmQiLCJzdW5rIiwiaW5jbHVkZXMiLCJjaGVja0dhbWVPdmVyIiwicmFuZG9tTnVtWmVyb1RvTmluZSIsInJhbmRvbURpcmVjdGlvbiIsImRpcmVjdGlvbiIsImRldGVybWluZVNhZmVQYXRoIiwic3RhcnQiLCJwYXRoIiwiYXJyT25lIiwiYXJyVHdvIiwiZmlsdGVyIiwib2JqT25lIiwic29tZSIsIm9ialR3byIsImlzVHVybiIsInR5cGUiLCJOdW1iZXIiLCJFcnJvciIsInNoaXBUeXBlIiwicmFuZG9tUGxhY2VtZW50IiwiaXNTdW5rIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyJdLCJzb3VyY2VSb290IjoiIn0=