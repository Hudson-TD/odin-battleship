(()=>{var e={817:e=>{e.exports={renderPlayerCreationEl:function(){const e=document.querySelector("body");let t=document.createElement("div");t.classList.add("player-creation-container");let r=document.createElement("p");r.innerText="You are about to enter unfamiliar waters in an effort to neutralize enemy ships. Due to thick fog our strategy is simple, fire artillery and observe any contact. Intel suggests the enemy fleet contains 5 ships of varying sizes...\n  \n  Instructions:\n  \n  Using arial reconnaissance order fire on mapped coordinates. Hits will be recorded with an explosion marker, while misses will be indicated with a water marker.";let a=document.createElement("form");a.setAttribute("name","player-creation-form"),a.setAttribute("class","player-creation-form");let i=document.createElement("input");i.setAttribute("id","playerName"),i.setAttribute("type","text"),i.setAttribute("min","1"),i.required=!0,i.setAttribute("max","25"),i.setAttribute("placeholder","Enter Player Name");let n=document.createElement("button");n.setAttribute("id","playerSubmit"),n.setAttribute("type","submit"),n.setAttribute("for","player-creation-form"),n.innerText="Launch Fleet",e.appendChild(t),t.appendChild(a),a.appendChild(r),a.appendChild(i),a.appendChild(n)},generateGameboardEl:function(e){const t=[...e.board.grid],r=document.querySelector(".main-content-container"),a=document.createElement("div"),i=document.createElement("table");i.setAttribute("class","gameboard-table");const n=document.createElement("th");n.innerText=`${e.name}'s Fleet`,a.appendChild(n);for(let r=0;r<10;r++){const a=document.createElement("tr");a.setAttribute("class","gameboard-row");for(let i=0;i<10;i++){const n=10*r+i;if(n<t.length){const r=document.createElement("td");a.appendChild(r),r.setAttribute("data-x",`${t[n].x}`),r.setAttribute("data-y",`${t[n].y}`),r.setAttribute("class","gameboard-tile"),"Computer"===e.name&&r.classList.add("enemy-tile")}}i.appendChild(a)}a.appendChild(i),r.appendChild(a)}}},404:(e,t,r)=>{const{renderPlayerCreationEl:a,generateGameboardEl:i}=r(817),{player:n}=r(507);e.exports={game:()=>({playerOneName:void 0,playerTwoName:"Computer",playerOne:void 0,PlayerTwo:void 0,init:function(){a(),this.cacheDom(),this.startEventListening()},cacheDom:function(){this.formContainer=document.querySelector(".player-creation-container"),this.formSubmitBtn=document.getElementById("playerSubmit"),this.formInput=document.getElementById("playerName")},startEventListening:function(){this.formSubmitBtn.addEventListener("click",(e=>{e.preventDefault(),this.playerOneName=this.formInput.value,this.formContainer.classList.add("hidden"),this.handleGameSetup()}))},handleGameSetup:function(){this.playerOne=n(this.playerOneName),this.PlayerTwo=n(this.playerTwoName),i(this.playerOne),i(this.PlayerTwo),this.handlePlotting(),this.startAttackListening()},startAttackListening:function(){document.querySelectorAll(".gameboard-tile").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();let t=e.target.getAttribute("data-x"),r=e.target.getAttribute("data-y");this.PlayerTwo.board.receiveAttack(t,r),console.log(this.PlayerTwo.board.grid)}))}))},handlePlotting:function(){this.playerOne.board.plotFleet(),this.PlayerTwo.board.plotFleet()}})}},498:(e,t,r)=>{const{ship:a}=r(643);e.exports={gameboard:()=>{let e=[];return{isGameOver:!1,grid:(()=>{for(let t=0;t<10;t++)for(let r=0;r<10;r++)e.push({x:t,y:r,shipName:void 0,attacked:!1});return e})(),missedShots:[],sunkShips:[],myFleet:[a("Carrier"),a("Battleship"),a("Destroyer"),a("Submarine"),a("Patrol Boat")],receiveAttack:function(e,t){console.log(`Hit logged at ${e},${t}`),this.grid.forEach((r=>{if(r.x==e&&r.y==t)if(r.attacked=!0,void 0===r.shipName)this.missedShots.push({x:e,y:t});else switch(r.shipName){case"Carrier":this.myFleet[0].hit();break;case"Battleship":this.myFleet[1].hit();break;case"Destroyer":this.myFleet[2].hit();break;case"Submarine":this.myFleet[3].hit();break;case"Patrol Boat":this.myFleet[4].hit()}}))},plotFleet(){this.myFleet.forEach((e=>{e.location.forEach((t=>{this.grid.forEach((r=>{r.x===t.x&&r.y===t.y&&(r.shipName=e.name)}))}))}))},checkSunkShips(){this.myFleet.forEach((e=>{!0===e.sunk&&this.sunkShips.push(String(e.name))}))},checkGameOver(){5===this.sunkShips.length&&(this.isGameOver=!0)}}}}},225:e=>{const t=()=>Math.floor(10*Math.random());e.exports={randomNumZeroToNine:t,randomDirection:()=>{let e;return e=t()<=4?"horizontal":"vertical",e},determineSafePath:(e,t)=>{let r;return"horizontal"===e?r=t.x<=4?"right":"left":"vertical"===e&&(r=t.y<=4?"down":"up"),r}}},507:(e,t,r)=>{const{gameboard:a}=r(498);e.exports={player:e=>({name:e,isTurn:!1,board:a()})}},643:(e,t,r)=>{const{randomNumZeroToNine:a,randomDirection:i,determineSafePath:n}=r(225);e.exports={ship:e=>{const t=e=>{switch(e){case"Carrier":return Number(5);case"Battleship":return Number(4);case"Destroyer":case"Submarine":return Number(3);case"Patrol Boat":return Number(2);default:throw new Error("Invalid ship type provided")}};return{name:e,length:t(e),hits:0,sunk:!1,location:(e=>{let t=[],r={x:a(),y:a()},o=i();return t=((e,t,r)=>{let a=[];if(a.push(r),"left"==e)for(let e=1;e<t;e++)a.push({x:r.x-e,y:r.y});else if("right"==e)for(let e=1;e<t;e++)a.push({x:r.x+e,y:r.y});else if("up"==e)for(let e=1;e<t;e++)a.push({x:r.x,y:r.y-e});else if("down"==e)for(let e=1;e<t;e++)a.push({x:r.x,y:r.y+e});return a})(n(o,r),e,r),t})(t(e)),hit:function(){this.hits+=1,console.log("Hit detected!"),this.isSunk()},isSunk:function(){this.hits===this.length&&(this.sunk=!0,console.log(`${this.name} has been sunk`))}}}}}},t={};function r(a){var i=t[a];if(void 0!==i)return i.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,r),n.exports}(()=>{const{game:e}=r(404);e().init()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxFQUFPQyxRQUFTMkcsR0FHL0M1RyxFQUFPQyxPQUNmLEMsTUN0QkEsTUFBTSxLQUFFbUMsR0FBUyxFQUFRLEtBRVRBLElBQ1JNLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvZG9tQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvZ2FtZUxvZ2ljLmpzIiwid2VicGFjazovL29kaW4tYmF0dGxlc2hpcC8uL3NyYy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL2hlbHBlcnMuanMiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL3BsYXllci5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvLi9zcmMvc2hpcC5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vb2Rpbi1iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIHJlbmRlclBsYXllckNyZWF0aW9uRWwoKSB7XG4gIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKTtcbiAgbGV0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgY29udGFpbmVyRWwuY2xhc3NMaXN0LmFkZChcInBsYXllci1jcmVhdGlvbi1jb250YWluZXJcIik7XG5cbiAgbGV0IG92ZXJ2aWV3VGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuXG4gIG92ZXJ2aWV3VGV4dC5pbm5lclRleHQgPSBgWW91IGFyZSBhYm91dCB0byBlbnRlciB1bmZhbWlsaWFyIHdhdGVycyBpbiBhbiBlZmZvcnQgdG8gbmV1dHJhbGl6ZSBlbmVteSBzaGlwcy4gRHVlIHRvIHRoaWNrIGZvZyBvdXIgc3RyYXRlZ3kgaXMgc2ltcGxlLCBmaXJlIGFydGlsbGVyeSBhbmQgb2JzZXJ2ZSBhbnkgY29udGFjdC4gSW50ZWwgc3VnZ2VzdHMgdGhlIGVuZW15IGZsZWV0IGNvbnRhaW5zIDUgc2hpcHMgb2YgdmFyeWluZyBzaXplcy4uLlxuICBcbiAgSW5zdHJ1Y3Rpb25zOlxuICBcbiAgVXNpbmcgYXJpYWwgcmVjb25uYWlzc2FuY2Ugb3JkZXIgZmlyZSBvbiBtYXBwZWQgY29vcmRpbmF0ZXMuIEhpdHMgd2lsbCBiZSByZWNvcmRlZCB3aXRoIGFuIGV4cGxvc2lvbiBtYXJrZXIsIHdoaWxlIG1pc3NlcyB3aWxsIGJlIGluZGljYXRlZCB3aXRoIGEgd2F0ZXIgbWFya2VyLmA7XG5cbiAgbGV0IGZvcm1FbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpO1xuICBmb3JtRWwuc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcInBsYXllci1jcmVhdGlvbi1mb3JtXCIpO1xuICBmb3JtRWwuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJwbGF5ZXItY3JlYXRpb24tZm9ybVwiKTtcblxuICBsZXQgaW5wdXRFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgaW5wdXRFbC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInBsYXllck5hbWVcIik7XG4gIGlucHV0RWwuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XG4gIGlucHV0RWwuc2V0QXR0cmlidXRlKFwibWluXCIsIFwiMVwiKTtcbiAgaW5wdXRFbC5yZXF1aXJlZCA9IHRydWU7XG4gIGlucHV0RWwuc2V0QXR0cmlidXRlKFwibWF4XCIsIFwiMjVcIik7XG4gIGlucHV0RWwuc2V0QXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIiwgXCJFbnRlciBQbGF5ZXIgTmFtZVwiKTtcblxuICBsZXQgYnRuRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICBidG5FbC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInBsYXllclN1Ym1pdFwiKTtcbiAgYnRuRWwuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInN1Ym1pdFwiKTtcbiAgYnRuRWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwicGxheWVyLWNyZWF0aW9uLWZvcm1cIik7XG4gIGJ0bkVsLmlubmVyVGV4dCA9IFwiTGF1bmNoIEZsZWV0XCI7XG5cbiAgYm9keS5hcHBlbmRDaGlsZChjb250YWluZXJFbCk7XG4gIGNvbnRhaW5lckVsLmFwcGVuZENoaWxkKGZvcm1FbCk7XG4gIGZvcm1FbC5hcHBlbmRDaGlsZChvdmVydmlld1RleHQpO1xuICBmb3JtRWwuYXBwZW5kQ2hpbGQoaW5wdXRFbCk7XG4gIGZvcm1FbC5hcHBlbmRDaGlsZChidG5FbCk7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlR2FtZWJvYXJkRWwocGxheWVyKSB7XG4gIGNvbnN0IGRhdGFBcnJheSA9IFsuLi5wbGF5ZXIuYm9hcmQuZ3JpZF07XG4gIGNvbnN0IG1haW5Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW4tY29udGVudC1jb250YWluZXJcIik7XG4gIGNvbnN0IHRhYmxlQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGFibGVcIik7XG4gIHRhYmxlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZ2FtZWJvYXJkLXRhYmxlXCIpO1xuICBjb25zdCBwbGF5ZXJIZWFkaW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xuICBwbGF5ZXJIZWFkaW5nLmlubmVyVGV4dCA9IGAke3BsYXllci5uYW1lfSdzIEZsZWV0YDtcbiAgdGFibGVDb250YWluZXIuYXBwZW5kQ2hpbGQocGxheWVySGVhZGluZyk7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xuICAgIHJvdy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImdhbWVib2FyZC1yb3dcIik7XG5cbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwOyBqKyspIHtcbiAgICAgIGNvbnN0IGRhdGFJbmRleCA9IGkgKiAxMCArIGo7XG5cbiAgICAgIGlmIChkYXRhSW5kZXggPCBkYXRhQXJyYXkubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZChjZWxsKTtcbiAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXhcIiwgYCR7ZGF0YUFycmF5W2RhdGFJbmRleF0ueH1gKTtcbiAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXlcIiwgYCR7ZGF0YUFycmF5W2RhdGFJbmRleF0ueX1gKTtcbiAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImdhbWVib2FyZC10aWxlXCIpO1xuICAgICAgICAvLyBPbmx5IGFkZCBldmVudCBsaXN0ZW5lcnMgdG8gZW5lbXkgZ2FtZWJvYXJkXG4gICAgICAgIGlmIChwbGF5ZXIubmFtZSA9PT0gXCJDb21wdXRlclwiKSB7XG4gICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKFwiZW5lbXktdGlsZVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0YWJsZS5hcHBlbmRDaGlsZChyb3cpO1xuICB9XG4gIHRhYmxlQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgbWFpbkNvbnRhaW5lci5hcHBlbmRDaGlsZCh0YWJsZUNvbnRhaW5lcik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0geyByZW5kZXJQbGF5ZXJDcmVhdGlvbkVsLCBnZW5lcmF0ZUdhbWVib2FyZEVsIH07XG4iLCJjb25zdCB7XG4gIHJlbmRlclBsYXllckNyZWF0aW9uRWwsXG4gIGdlbmVyYXRlR2FtZWJvYXJkRWwsXG59ID0gcmVxdWlyZShcIi4vZG9tQ29udHJvbGxlclwiKTtcbmNvbnN0IHsgcGxheWVyIH0gPSByZXF1aXJlKFwiLi9wbGF5ZXJcIik7XG5cbmNvbnN0IGdhbWUgPSAoKSA9PiB7XG4gIHJldHVybiB7XG4gICAgcGxheWVyT25lTmFtZTogdW5kZWZpbmVkLFxuICAgIHBsYXllclR3b05hbWU6IFwiQ29tcHV0ZXJcIixcbiAgICBwbGF5ZXJPbmU6IHVuZGVmaW5lZCxcbiAgICBQbGF5ZXJUd286IHVuZGVmaW5lZCxcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZW5kZXJQbGF5ZXJDcmVhdGlvbkVsKCk7XG4gICAgICB0aGlzLmNhY2hlRG9tKCk7XG4gICAgICB0aGlzLnN0YXJ0RXZlbnRMaXN0ZW5pbmcoKTtcbiAgICB9LFxuICAgIGNhY2hlRG9tOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmZvcm1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXllci1jcmVhdGlvbi1jb250YWluZXJcIik7XG4gICAgICB0aGlzLmZvcm1TdWJtaXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXllclN1Ym1pdFwiKTtcbiAgICAgIHRoaXMuZm9ybUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5ZXJOYW1lXCIpO1xuICAgIH0sXG4gICAgc3RhcnRFdmVudExpc3RlbmluZzogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5mb3JtU3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMucGxheWVyT25lTmFtZSA9IHRoaXMuZm9ybUlucHV0LnZhbHVlO1xuICAgICAgICB0aGlzLmZvcm1Db250YWluZXIuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcbiAgICAgICAgdGhpcy5oYW5kbGVHYW1lU2V0dXAoKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgaGFuZGxlR2FtZVNldHVwOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnBsYXllck9uZSA9IHBsYXllcih0aGlzLnBsYXllck9uZU5hbWUpO1xuICAgICAgdGhpcy5QbGF5ZXJUd28gPSBwbGF5ZXIodGhpcy5wbGF5ZXJUd29OYW1lKTtcbiAgICAgIGdlbmVyYXRlR2FtZWJvYXJkRWwodGhpcy5wbGF5ZXJPbmUpO1xuICAgICAgZ2VuZXJhdGVHYW1lYm9hcmRFbCh0aGlzLlBsYXllclR3byk7XG4gICAgICB0aGlzLmhhbmRsZVBsb3R0aW5nKCk7XG4gICAgICB0aGlzLnN0YXJ0QXR0YWNrTGlzdGVuaW5nKCk7XG4gICAgfSxcbiAgICBzdGFydEF0dGFja0xpc3RlbmluZzogZnVuY3Rpb24gKCkge1xuICAgICAgY29uc3QgY2VsbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmdhbWVib2FyZC10aWxlXCIpO1xuICAgICAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBsZXQgeCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEteFwiKTtcbiAgICAgICAgICBsZXQgeSA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEteVwiKTtcbiAgICAgICAgICB0aGlzLlBsYXllclR3by5ib2FyZC5yZWNlaXZlQXR0YWNrKHgsIHkpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuUGxheWVyVHdvLmJvYXJkLmdyaWQpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgaGFuZGxlUGxvdHRpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMucGxheWVyT25lLmJvYXJkLnBsb3RGbGVldCgpO1xuICAgICAgdGhpcy5QbGF5ZXJUd28uYm9hcmQucGxvdEZsZWV0KCk7XG4gICAgfSxcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0geyBnYW1lIH07XG4iLCJjb25zdCB7IHNoaXAgfSA9IHJlcXVpcmUoXCIuL3NoaXBcIik7XG5cbmNvbnN0IGdhbWVib2FyZCA9ICgpID0+IHtcbiAgbGV0IGdyaWRBcnIgPSBbXTtcblxuICBjb25zdCBnZW5lcmF0ZUdyaWQgPSAoKSA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDEwOyBqKyspIHtcbiAgICAgICAgZ3JpZEFyci5wdXNoKHtcbiAgICAgICAgICB4OiBpLFxuICAgICAgICAgIHk6IGosXG4gICAgICAgICAgc2hpcE5hbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICBhdHRhY2tlZDogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBncmlkQXJyO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaXNHYW1lT3ZlcjogZmFsc2UsXG4gICAgZ3JpZDogZ2VuZXJhdGVHcmlkKCksXG4gICAgbWlzc2VkU2hvdHM6IFtdLFxuICAgIHN1bmtTaGlwczogW10sXG4gICAgbXlGbGVldDogW1xuICAgICAgc2hpcChcIkNhcnJpZXJcIiksXG4gICAgICBzaGlwKFwiQmF0dGxlc2hpcFwiKSxcbiAgICAgIHNoaXAoXCJEZXN0cm95ZXJcIiksXG4gICAgICBzaGlwKFwiU3VibWFyaW5lXCIpLFxuICAgICAgc2hpcChcIlBhdHJvbCBCb2F0XCIpLFxuICAgIF0sXG4gICAgcmVjZWl2ZUF0dGFjazogZnVuY3Rpb24gKHhDb29yZCwgeUNvb3JkKSB7XG4gICAgICBjb25zb2xlLmxvZyhgSGl0IGxvZ2dlZCBhdCAke3hDb29yZH0sJHt5Q29vcmR9YCk7XG4gICAgICB0aGlzLmdyaWQuZm9yRWFjaCgob2JqKSA9PiB7XG4gICAgICAgIGlmIChvYmoueCA9PSB4Q29vcmQgJiYgb2JqLnkgPT0geUNvb3JkKSB7XG4gICAgICAgICAgb2JqLmF0dGFja2VkID0gdHJ1ZTtcbiAgICAgICAgICBpZiAob2JqLnNoaXBOYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMubWlzc2VkU2hvdHMucHVzaCh7IHg6IHhDb29yZCwgeTogeUNvb3JkIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzd2l0Y2ggKG9iai5zaGlwTmFtZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiQ2FycmllclwiOlxuICAgICAgICAgICAgICAgIHRoaXMubXlGbGVldFswXS5oaXQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSBcIkJhdHRsZXNoaXBcIjpcbiAgICAgICAgICAgICAgICB0aGlzLm15RmxlZXRbMV0uaGl0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgXCJEZXN0cm95ZXJcIjpcbiAgICAgICAgICAgICAgICB0aGlzLm15RmxlZXRbMl0uaGl0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgXCJTdWJtYXJpbmVcIjpcbiAgICAgICAgICAgICAgICB0aGlzLm15RmxlZXRbM10uaGl0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGNhc2UgXCJQYXRyb2wgQm9hdFwiOlxuICAgICAgICAgICAgICAgIHRoaXMubXlGbGVldFs0XS5oaXQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBwbG90RmxlZXQoKSB7XG4gICAgICBsZXQgZmxlZXQgPSB0aGlzLm15RmxlZXQ7XG4gICAgICBmbGVldC5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgICAgIGxldCBwbG90cyA9IHNoaXAubG9jYXRpb247XG4gICAgICAgIHBsb3RzLmZvckVhY2goKGNvb3JkKSA9PiB7XG4gICAgICAgICAgdGhpcy5ncmlkLmZvckVhY2goKG9iaikgPT4ge1xuICAgICAgICAgICAgaWYgKG9iai54ID09PSBjb29yZC54ICYmIG9iai55ID09PSBjb29yZC55KSB7XG4gICAgICAgICAgICAgIG9iai5zaGlwTmFtZSA9IHNoaXAubmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGNoZWNrU3Vua1NoaXBzKCkge1xuICAgICAgbGV0IGZsZWV0ID0gdGhpcy5teUZsZWV0O1xuICAgICAgZmxlZXQuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgICAgICBpZiAoc2hpcC5zdW5rID09PSB0cnVlKSB7XG4gICAgICAgICAgdGhpcy5zdW5rU2hpcHMucHVzaChTdHJpbmcoc2hpcC5uYW1lKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBjaGVja0dhbWVPdmVyKCkge1xuICAgICAgaWYgKHRoaXMuc3Vua1NoaXBzLmxlbmd0aCA9PT0gNSkge1xuICAgICAgICB0aGlzLmlzR2FtZU92ZXIgPSB0cnVlO1xuICAgICAgfVxuICAgIH0sXG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHsgZ2FtZWJvYXJkIH07XG4iLCJjb25zdCByYW5kb21OdW1aZXJvVG9OaW5lID0gKCkgPT4ge1xuICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xufTtcblxuY29uc3QgcmFuZG9tRGlyZWN0aW9uID0gKCkgPT4ge1xuICBsZXQgZGlyZWN0aW9uO1xuICBsZXQgY29pbkZsaXAgPSByYW5kb21OdW1aZXJvVG9OaW5lKCk7XG5cbiAgaWYgKGNvaW5GbGlwIDw9IDQpIHtcbiAgICBkaXJlY3Rpb24gPSBcImhvcml6b250YWxcIjtcbiAgfSBlbHNlIHtcbiAgICBkaXJlY3Rpb24gPSBcInZlcnRpY2FsXCI7XG4gIH1cblxuICByZXR1cm4gZGlyZWN0aW9uO1xufTtcblxuY29uc3QgZGV0ZXJtaW5lU2FmZVBhdGggPSAoZGlyZWN0aW9uLCBzdGFydCkgPT4ge1xuICBsZXQgcGF0aDtcblxuICBpZiAoZGlyZWN0aW9uID09PSBcImhvcml6b250YWxcIikge1xuICAgIGlmIChzdGFydC54IDw9IDQpIHtcbiAgICAgIHBhdGggPSBcInJpZ2h0XCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhdGggPSBcImxlZnRcIjtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSBcInZlcnRpY2FsXCIpIHtcbiAgICBpZiAoc3RhcnQueSA8PSA0KSB7XG4gICAgICBwYXRoID0gXCJkb3duXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhdGggPSBcInVwXCI7XG4gICAgfVxuICB9XG4gIHJldHVybiBwYXRoO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7IHJhbmRvbU51bVplcm9Ub05pbmUsIHJhbmRvbURpcmVjdGlvbiwgZGV0ZXJtaW5lU2FmZVBhdGggfTtcbiIsImNvbnN0IHsgZ2FtZWJvYXJkIH0gPSByZXF1aXJlKFwiLi9nYW1lYm9hcmQuanNcIik7XG5cbmNvbnN0IHBsYXllciA9IChuYW1lKSA9PiB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogbmFtZSxcbiAgICBpc1R1cm46IGZhbHNlLFxuICAgIGJvYXJkOiBnYW1lYm9hcmQoKSxcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0geyBwbGF5ZXIgfTtcbiIsImNvbnN0IHtcbiAgcmFuZG9tTnVtWmVyb1RvTmluZSxcbiAgcmFuZG9tRGlyZWN0aW9uLFxuICBkZXRlcm1pbmVTYWZlUGF0aCxcbn0gPSByZXF1aXJlKFwiLi9oZWxwZXJzLmpzXCIpO1xuXG5jb25zdCBzaGlwID0gKHR5cGUpID0+IHtcbiAgY29uc3QgbGVuZ3RoID0gKHR5cGUpID0+IHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgXCJDYXJyaWVyXCI6XG4gICAgICAgIHJldHVybiBOdW1iZXIoNSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIkJhdHRsZXNoaXBcIjpcbiAgICAgICAgcmV0dXJuIE51bWJlcig0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiRGVzdHJveWVyXCI6XG4gICAgICAgIHJldHVybiBOdW1iZXIoMyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIlN1Ym1hcmluZVwiOlxuICAgICAgICByZXR1cm4gTnVtYmVyKDMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJQYXRyb2wgQm9hdFwiOlxuICAgICAgICByZXR1cm4gTnVtYmVyKDIpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc2hpcCB0eXBlIHByb3ZpZGVkXCIpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgZ2VuZXJhdGVDb29yZGluYXRlcyA9IChwYXRoLCBsZW5ndGgsIHN0YXJ0KSA9PiB7XG4gICAgbGV0IGxpc3QgPSBbXTtcbiAgICBsaXN0LnB1c2goc3RhcnQpO1xuXG4gICAgaWYgKHBhdGggPT0gXCJsZWZ0XCIpIHtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGlzdC5wdXNoKHsgeDogc3RhcnQueCAtIGksIHk6IHN0YXJ0LnkgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChwYXRoID09IFwicmlnaHRcIikge1xuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBsaXN0LnB1c2goeyB4OiBzdGFydC54ICsgaSwgeTogc3RhcnQueSB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhdGggPT0gXCJ1cFwiKSB7XG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxpc3QucHVzaCh7IHg6IHN0YXJ0LngsIHk6IHN0YXJ0LnkgLSBpIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocGF0aCA9PSBcImRvd25cIikge1xuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBsaXN0LnB1c2goeyB4OiBzdGFydC54LCB5OiBzdGFydC55ICsgaSB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxpc3Q7XG4gIH07XG5cbiAgY29uc3QgcmFuZG9tUGxhY2VtZW50ID0gKHNoaXBMZW5ndGgpID0+IHtcbiAgICBsZXQgc2hpcENvb3JkaW5hdGVzID0gW107XG4gICAgbGV0IHN0YXJ0aW5nUG9pbnQgPSB7XG4gICAgICB4OiByYW5kb21OdW1aZXJvVG9OaW5lKCksXG4gICAgICB5OiByYW5kb21OdW1aZXJvVG9OaW5lKCksXG4gICAgfTtcblxuICAgIGxldCBkaXJlY3Rpb24gPSByYW5kb21EaXJlY3Rpb24oKTtcblxuICAgIGxldCBwYXRoID0gZGV0ZXJtaW5lU2FmZVBhdGgoZGlyZWN0aW9uLCBzdGFydGluZ1BvaW50KTtcblxuICAgIHNoaXBDb29yZGluYXRlcyA9IGdlbmVyYXRlQ29vcmRpbmF0ZXMocGF0aCwgc2hpcExlbmd0aCwgc3RhcnRpbmdQb2ludCk7XG5cbiAgICByZXR1cm4gc2hpcENvb3JkaW5hdGVzO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgbmFtZTogdHlwZSxcbiAgICBsZW5ndGg6IGxlbmd0aCh0eXBlKSxcbiAgICBoaXRzOiAwLFxuICAgIHN1bms6IGZhbHNlLFxuICAgIGxvY2F0aW9uOiByYW5kb21QbGFjZW1lbnQobGVuZ3RoKHR5cGUpKSxcbiAgICBoaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuaGl0cyArPSAxO1xuICAgICAgY29uc29sZS5sb2coXCJIaXQgZGV0ZWN0ZWQhXCIpO1xuICAgICAgdGhpcy5pc1N1bmsoKTtcbiAgICB9LFxuICAgIGlzU3VuazogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuaGl0cyA9PT0gdGhpcy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5zdW5rID0gdHJ1ZTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7dGhpcy5uYW1lfSBoYXMgYmVlbiBzdW5rYCk7XG4gICAgICB9XG4gICAgfSxcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0geyBzaGlwIH07XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiY29uc3QgeyBnYW1lIH0gPSByZXF1aXJlKFwiLi9nYW1lTG9naWNcIik7XG5cbmNvbnN0IG5ld0dhbWUgPSBnYW1lKCk7XG5uZXdHYW1lLmluaXQoKTtcbiJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwicmVuZGVyUGxheWVyQ3JlYXRpb25FbCIsImJvZHkiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250YWluZXJFbCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJvdmVydmlld1RleHQiLCJpbm5lclRleHQiLCJmb3JtRWwiLCJzZXRBdHRyaWJ1dGUiLCJpbnB1dEVsIiwicmVxdWlyZWQiLCJidG5FbCIsImFwcGVuZENoaWxkIiwiZ2VuZXJhdGVHYW1lYm9hcmRFbCIsInBsYXllciIsImRhdGFBcnJheSIsImJvYXJkIiwiZ3JpZCIsIm1haW5Db250YWluZXIiLCJ0YWJsZUNvbnRhaW5lciIsInRhYmxlIiwicGxheWVySGVhZGluZyIsIm5hbWUiLCJpIiwicm93IiwiaiIsImRhdGFJbmRleCIsImxlbmd0aCIsImNlbGwiLCJ4IiwieSIsImdhbWUiLCJwbGF5ZXJPbmVOYW1lIiwidW5kZWZpbmVkIiwicGxheWVyVHdvTmFtZSIsInBsYXllck9uZSIsIlBsYXllclR3byIsImluaXQiLCJ0aGlzIiwiY2FjaGVEb20iLCJzdGFydEV2ZW50TGlzdGVuaW5nIiwiZm9ybUNvbnRhaW5lciIsImZvcm1TdWJtaXRCdG4iLCJnZXRFbGVtZW50QnlJZCIsImZvcm1JbnB1dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJ2YWx1ZSIsImhhbmRsZUdhbWVTZXR1cCIsImhhbmRsZVBsb3R0aW5nIiwic3RhcnRBdHRhY2tMaXN0ZW5pbmciLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInRhcmdldCIsImdldEF0dHJpYnV0ZSIsInJlY2VpdmVBdHRhY2siLCJjb25zb2xlIiwibG9nIiwicGxvdEZsZWV0Iiwic2hpcCIsImdhbWVib2FyZCIsImdyaWRBcnIiLCJpc0dhbWVPdmVyIiwicHVzaCIsInNoaXBOYW1lIiwiYXR0YWNrZWQiLCJnZW5lcmF0ZUdyaWQiLCJtaXNzZWRTaG90cyIsInN1bmtTaGlwcyIsIm15RmxlZXQiLCJ4Q29vcmQiLCJ5Q29vcmQiLCJvYmoiLCJoaXQiLCJsb2NhdGlvbiIsImNvb3JkIiwiY2hlY2tTdW5rU2hpcHMiLCJzdW5rIiwiU3RyaW5nIiwiY2hlY2tHYW1lT3ZlciIsInJhbmRvbU51bVplcm9Ub05pbmUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJyYW5kb21EaXJlY3Rpb24iLCJkaXJlY3Rpb24iLCJkZXRlcm1pbmVTYWZlUGF0aCIsInN0YXJ0IiwicGF0aCIsImlzVHVybiIsInR5cGUiLCJOdW1iZXIiLCJFcnJvciIsImhpdHMiLCJzaGlwTGVuZ3RoIiwic2hpcENvb3JkaW5hdGVzIiwic3RhcnRpbmdQb2ludCIsImxpc3QiLCJnZW5lcmF0ZUNvb3JkaW5hdGVzIiwicmFuZG9tUGxhY2VtZW50IiwiaXNTdW5rIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyJdLCJzb3VyY2VSb290IjoiIn0=